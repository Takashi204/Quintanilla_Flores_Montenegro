package pos.login;

import javax.swing.*;
import java.awt.*;

public class LoginFrame extends JFrame {

    private JTextField txtUser;
    private JPasswordField txtPass;
    private JRadioButton rAdmin, rCashier;

    public LoginFrame() {
        setTitle("POS - Login");
        setSize(800, 500);
        setDefaultCloseOperation(EXIT_ON_CLOSE);
        setLocationRelativeTo(null);
        setLayout(new BorderLayout());

        // Fondo principal (gris claro)
        JPanel bg = new JPanel(new GridBagLayout());
        bg.setBackground(new Color(0xF5F7FA));
        add(bg, BorderLayout.CENTER);

        // Panel blanco para el login
        JPanel card = new JPanel(null);
        card.setPreferredSize(new Dimension(350, 300));
        card.setBackground(Color.WHITE);

        JLabel lblTitle = new JLabel("Login", SwingConstants.CENTER);
        lblTitle.setFont(new Font("SansSerif", Font.BOLD, 22));
        lblTitle.setForeground(new Color(0x333333));
        lblTitle.setBounds(120, 20, 120, 30);
        card.add(lblTitle);

        JLabel lblUser = new JLabel("Usuario:");
        lblUser.setForeground(new Color(0x333333));
        lblUser.setBounds(40, 70, 300, 20);
        card.add(lblUser);

        txtUser = new JTextField();
        txtUser.setBounds(40, 90, 260, 28);
        card.add(txtUser);

        JLabel lblPass = new JLabel("Contraseña:");
        lblPass.setForeground(new Color(0x333333));
        lblPass.setBounds(40, 130, 300, 20);
        card.add(lblPass);

        txtPass = new JPasswordField();
        txtPass.setBounds(40, 150, 260, 28);
        card.add(txtPass);

        // Radio buttons
        rAdmin = new JRadioButton("Admin");
        rCashier = new JRadioButton("Cashier");
        rAdmin.setBounds(70, 190, 80, 24);
        rCashier.setBounds(180, 190, 80, 24);
        rAdmin.setOpaque(false);
        rCashier.setOpaque(false);
        rAdmin.setForeground(new Color(0x333333));
        rCashier.setForeground(new Color(0x333333));

        ButtonGroup group = new ButtonGroup();
        group.add(rAdmin);
        group.add(rCashier);
        rAdmin.setSelected(true);

        card.add(rAdmin);
        card.add(rCashier);

        JButton btnLogin = new JButton("Login");
        btnLogin.setBackground(new Color(0x2563EB)); // azul profesional
        btnLogin.setForeground(Color.WHITE); // texto blanco
        btnLogin.setFocusPainted(false);
        btnLogin.setBounds(100, 230, 140, 36);
        card.add(btnLogin);

        // Texto a la izquierda
        JPanel left = new JPanel();
        left.setOpaque(false);
        left.setLayout(new BoxLayout(left, BoxLayout.Y_AXIS));
        JLabel t1 = new JLabel("Almacén Sonia – POS");
        t1.setFont(new Font("SansSerif", Font.BOLD, 28));
        t1.setForeground(new Color(0x111827));
        JLabel t2 = new JLabel("Sistema de ventas y gestión confiable");
        t2.setFont(new Font("SansSerif", Font.PLAIN, 14));
        t2.setForeground(new Color(0x374151));
        left.add(t1);
        left.add(Box.createVerticalStrut(8));
        left.add(t2);

        // Añadir al fondo
        GridBagConstraints gc = new GridBagConstraints();
        gc.insets = new Insets(20, 40, 20, 40);
        gc.gridx = 0;
        gc.gridy = 0;
        bg.add(left, gc);

        gc.gridx = 1;
        bg.add(card, gc);

        // Acción de login
        getRootPane().setDefaultButton(btnLogin);
        btnLogin.addActionListener(e -> doLogin());
    }

    private void doLogin() {
        String user = txtUser.getText().trim();
        String pass = new String(txtPass.getPassword());
        if (user.isEmpty() || pass.isEmpty()) {
            JOptionPane.showMessageDialog(this, "Debe ingresar usuario y contraseña.");
            return;
        }
        String role = rAdmin.isSelected() ? "Admin" : "Cashier";
        JOptionPane.showMessageDialog(this, "Bienvenido " + user + " (" + role + ")");
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(() -> new LoginFrame().setVisible(true));
    }
}
